/* ======================================================= */
/* === VARIABLES & GLOBAL STYLES ======================== */
/* ======================================================= */
:root{
  --bg:#f6f7f9;
  --bg-accent:
    radial-gradient(1200px 600px at 20% -10%, rgba(47,111,237,.10), transparent 60%),
    radial-gradient(900px 500px at 120% 0%, rgba(47,111,237,.07), transparent 60%);
  --card:#fff;
  --text:#1f2937;
  --muted:#6b7280;
  --primary:#2f6fed;
  --ring:rgba(47,111,237,.25);
  --radius:16px;
  --shadow:0 6px 15px rgba(0,0,0,.05);
  --border-light:#eef2f7;
  --border-medium:#e5e7eb;
  --bg-subtle:#f9fafb;
  --text-dark:#111827;
  --text-medium:#374151;
  --text-light:#64748b;
  --red-light:#fef2f2;
  --red-medium:#fecaca;
  --red-dark:#b91c1c;
  --red-error:#ef4444;
  --green-success:#28a745;
  --gray-bg:#f1f3f7;
  --gray-hover:#e5e7eb;
  --gray-border:#d1d5db;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;color:var(--text);
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg);background-image:var(--bg-accent);background-attachment:fixed;
  font-size:16px;line-height:1.5;
}
body.no-scroll{ overflow:hidden; }

h1,h2,h4{margin:0;font-weight:600}
h1{font-size:1.4em;letter-spacing:.2px}
h2{font-size:1.2em}
h4{font-size:1em}
ul{margin:0;padding:0;list-style:none}

input[type="search"],input[type="email"]{
  border:1px solid var(--gray-border);border-radius:8px;padding:8px 12px;font-size:14px;background:var(--card)
}
input[type="search"]:focus,input[type="email"]:focus{
  outline:none;border-color:var(--primary);box-shadow:0 0 0 3px var(--ring)
}
.hidden{display:none!important}
.muted{ color: var(--muted); }
.text-link{ color: var(--primary); text-decoration: underline; cursor: pointer; }

/* ======================================================= */
/* === AUTH SCREEN ====================================== */
/* ======================================================= */
/* Auth screen (revival) */
#auth-container{
  max-width:400px;margin:5em auto;text-align:center;padding:2em;background:var(--card);
  border:1px solid var(--border-medium);border-radius:var(--radius);box-shadow:var(--shadow)
}
#auth-container h2{margin-bottom:.5em}
#auth-container p{margin-bottom:1.5em;color:var(--muted)}
.g_id_signin{display:inline-block}

/* Request overlay compose block */
.req-compose{ display:none; margin-top:12px; padding-top:12px; border-top:1px solid var(--border-light); }
.req-compose.show{ display:block; }
textarea.panel-input{ resize:vertical; min-height:110px; }
.link{ color:var(--primary); text-decoration:underline; cursor:pointer; }
.link:hover{ opacity:.85; }

.g_id_signin{ display:inline-block }

/* ======================================================= */
/* === HEADER ============================================ */
/* ======================================================= */
header.top{
  position:sticky;top:0;z-index:10;background:var(--card);
  padding:12px 20px;box-shadow:0 1px 2px rgba(0,0,0,.06);
  display:flex;align-items:center;gap:15px
}
.grow{flex:1}
.toolbar{
  display:flex;gap:10px;align-items:center;background:var(--gray-bg);
  padding:6px 12px;border-radius:999px;border:1px solid transparent
}
.toolbar:focus-within{background:var(--card);border-color:var(--primary);box-shadow:0 0 0 3px var(--ring)}
.toolbar .material-symbols-outlined{color:var(--text-light)}
.toolbar input[type="search"]{border:none;outline:none;background:transparent;padding:0;font-size:14px;width:220px}
.toolbar input[type="search"]::placeholder{color:var(--muted)}
.user-profile-container{position:relative}
.user-profile-btn{
  display:flex;align-items:center;gap:8px;background:var(--gray-bg);
  border:1px solid transparent;border-radius:999px;padding:4px 12px 4px 4px;cursor:pointer;transition:background-color .2s
}
.user-profile-btn:hover,.user-profile-btn:focus-within{background:var(--gray-hover)}
.user-profile-btn img{width:28px;height:28px;border-radius:50%;background:#ccc;border:1px solid var(--border-medium)}
.user-profile-btn .user-email{font-size:14px;font-weight:600;color:var(--text-medium)}
.logout-dropdown{
  position:absolute;top:calc(100% + 5px);right:0;background:var(--card);border-radius:var(--radius);
  box-shadow:var(--shadow);border:1px solid var(--border-light);padding:8px;min-width:180px;z-index:20;
  opacity:0;visibility:hidden;transform:translateY(-10px);transition:opacity .2s,transform .2s,visibility 0s linear .2s
}
.logout-dropdown.visible{opacity:1;visibility:visible;transform:translateY(0);transition-delay:0s}
#logout-btn{
  width:100%;background:var(--red-light);color:var(--red-dark);border:none;padding:8px 12px;border-radius:10px;font-weight:600;cursor:pointer;
  display:flex;align-items:center;gap:8px;transition:background-color .2s
}
#logout-btn:hover{background:var(--red-medium)}
#logout-btn .material-symbols-outlined{font-size:18px}

/* ======================================================= */
/* === BUTTONS =========================================== */
/* ======================================================= */
.btn{
  border:none;background:var(--primary);color:#fff;padding:8px 14px;border-radius:10px;font-weight:600;cursor:pointer;
  display:inline-flex;align-items:center;gap:6px;box-shadow:0 4px 10px rgba(47,111,237,.15);
  transition:background-color .2s,box-shadow .2s;font-size:14px
}
.btn:hover{background:#1c5cdc;box-shadow:0 6px 14px rgba(47,111,237,.20)}
.btn:disabled{opacity:.6;cursor:not-allowed;box-shadow:none}
.btn.ghost{background:var(--card);color:var(--text-medium);border:1px solid var(--border-medium);box-shadow:none}
.btn.ghost:hover{background:var(--bg-subtle);border-color:var(--gray-border)}
.btn.tiny{background:var(--text-dark);color:#fff;padding:6px 10px;border-radius:8px;font-size:13px;line-height:1;box-shadow:none}
.btn.tiny.ghost{background:var(--gray-bg)!important;color:var(--text-medium)!important;border:1px solid var(--border-medium)!important}
.btn.tiny.ghost:hover{background:var(--gray-hover)!important}
.btn.tiny[aria-expanded="true"]{background:var(--gray-hover);color:var(--text-dark)}
.btn.copy-btn.copied{background:var(--green-success);color:#fff}
.icon-btn{border:1px solid var(--border-medium);background:var(--card);color:var(--text-medium);padding:6px 8px;border-radius:10px;cursor:pointer;line-height:0}
.icon-btn:hover{background:var(--bg-subtle)}
.revoke,
.revoke-btn{background:var(--red-light)!important;color:var(--red-error)!important;border:1px solid var(--red-medium)!important;box-shadow:none!important;border-radius:8px;padding:6px 10px;font-size:12px;cursor:pointer}
.revoke:hover,
.revoke-btn:hover{background:var(--red-medium)!important}

/* ======================================================= */
/* === MAIN PAGE (cards grid) ============================ */
/* ======================================================= */
.wrap{max-width:1280px;margin:30px auto;padding:0 20px}
.card{width:100%;background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow)}
.note{padding:15px 20px;color:var(--muted);font-size:13px;text-align:center;border-top:1px solid var(--border-light)}

#cid-list{
  padding:20px;
  display:grid;
  gap:20px;
  grid-template-columns:repeat(auto-fit, minmax(380px, 1fr));
  align-items:start;
  justify-content:center;
}
@media (max-width:1200px){ #cid-list{ gap:16px; } }
@media (max-width:992px) { #cid-list{ grid-template-columns:repeat(auto-fit, minmax(320px, 1fr)); } }
@media (max-width:768px) { #cid-list{ grid-template-columns:minmax(0,1fr); } }

li.cidElement{
  border:1px solid var(--border-light);
  border-radius:14px;
  overflow:hidden;
  background:#fff;
  display:flex;
  flex-direction:column;
  min-width:0;
  box-shadow:0 2px 4px rgba(0,0,0,.03);
}

.title{
  padding:12px 16px;
  font-weight:600;
  background:var(--bg-subtle);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  border-bottom:1px solid var(--border-light);
}
.title::before{
  content:"mail";
  font-family:"Material Symbols Outlined";
  font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 0,'opsz' 20;
  font-size:20px;color:var(--text-light);
  flex:0 0 auto;
}
.title .label{
  flex:1 1 auto;
  min-width:0;
  color:var(--text-medium);
  line-height:1.25;
  overflow-wrap:anywhere;
  white-space:normal;
}
.cid-actions{display:flex;align-items:center;gap:8px;flex:0 0 auto}
.cid-actions .btn,
.cid-actions .icon-btn{flex:0 0 auto}

/* ======================================================= */
/* === TOTP panel (perfectly centered) ================== */
/* ======================================================= */
.token{
  position:relative;
  display:flex;
  justify-content:center;         /* center whole content */
  align-items:center;
  gap:0;
  padding:0 96px;                 /* symmetric padding: reserves space both sides */
  background:var(--text-dark);
  overflow:hidden;
  height:0;                       /* closed */
  transition:height .25s ease;
  border-top:1px solid var(--text-dark);
}
.token-content{
  display:flex;
  justify-content:center;         /* center ring + code */
  align-items:center;
  gap:14px;
  margin:0 auto;
  text-align:center;
}
progress-ring.wheel{
  display:inline-block;
  width:40px;
  height:40px;
}
.displayCounter{
  display:inline-block;color:#c6e1ff;font-family:ui-monospace,SFMono-Regular,Menlo,monospace;
  font-size:28px;letter-spacing:2px;vertical-align:middle;padding:15px 0;min-width:7ch;text-align:center
}
.wheel{vertical-align:middle}

/* Copy button positioned in the right padding; left padding balances visually */
.token .copy-btn{position:absolute;right:24px;top:50%;transform:translateY(-50%)}
.token .refresh-btn{border-radius:999px;background:var(--card);border-color:var(--border-light);padding:6px}
.token .refresh-btn .material-symbols-outlined{font-size:18px}

/* Hide any legacy inline user panel (avoid duplication with overlay) */
.user-panel{ display:none !important; }

/* ======================================================= */
/* === OVERLAYS ========================================== */
/* ======================================================= */
.overlay{
  position:fixed;inset:0;z-index:1000;
  display:grid;
  grid-template-rows:1fr;
  align-items:center;justify-items:center;
  visibility:hidden;opacity:0;transition:opacity .2s ease, visibility 0s linear .2s;
}
.overlay[aria-hidden="false"]{ visibility:visible; opacity:1; transition-delay:0s; }
.overlay-backdrop{
  position:absolute;inset:0;background:rgba(0,0,0,.45)
}
.overlay-panel{
  position:relative;z-index:1;background:#fff;border-radius:16px;border:1px solid var(--border-light);
  width:min(720px, 92vw);max-height:90vh;display:flex;flex-direction:column;box-shadow:0 20px 50px rgba(0,0,0,.25)
}
.overlay-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 16px;border-bottom:1px solid var(--border-light)
}
.overlay-body{
  padding:16px;overflow:auto
}
.overlay-footer{
  padding:12px 16px;border-top:1px solid var(--border-light);display:flex;justify-content:flex-end;gap:8px
}

.panel-row{
  display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin-bottom:10px
}
.panel-input{
  flex:1;min-width:200px;padding:8px 10px;border:1px solid var(--gray-border);border-radius:8px
}
.user-list{
  margin-top:6px;border:1px solid var(--border-light);border-radius:10px;overflow:hidden
}
.user-list li{
  display:grid;grid-template-columns:1fr auto;gap:12px;align-items:center;
  padding:10px 12px;border-bottom:1px solid var(--border-light);font-size:14px
}
.user-list li:last-child{border-bottom:none}
.user-list .email{color:var(--text);overflow-wrap:anywhere}
.status{ font-size:13px; color: var(--muted); min-height:18px; margin-top:2px }